{"version":3,"file":"ObjectPageExtension-dbg.controller.js","names":["ObjectPageExtension","ControllerExtension","extend","overrides","onInit","editFlow","onBeforeSave","context","base","getExtensionAPI","getBindingContext","getProperty","Promise","resolve","reject","openDialog","undefined","_openDialog","approveDialog","loadFragment","id","initialBindingContext","name","getBeginButton","attachPress","close","destroy","getEndButton","attachAfterClose","open","error"],"sources":["ObjectPageExtension.controller.ts"],"sourcesContent":["import ControllerExtension from \"sap/ui/core/mvc/ControllerExtension\";\nimport ExtensionAPI from \"sap/fe/templates/ObjectPage/ExtensionAPI\";\nimport Context from \"sap/ui/model/odata/v4/Context\";\nimport Dialog from \"sap/m/Dialog\";\n\n/**\n * @namespace sap.fe.cap.travel.ext.controller\n * @controller\n */\nexport default class ObjectPageExtension extends ControllerExtension<ExtensionAPI> {\n\tasync openDialog(resolve: (value: PromiseLike<null> | null) => void, reject: (reason?: any) => void, context: Context) {\n\t\t//try catch ensures errors in floating promises are handled properly\n\t\ttry {\n\t\t\tlet approveDialog = (await this.base.getExtensionAPI().loadFragment({\n\t\t\t\tid: \"myFragment\",\n\t\t\t\tinitialBindingContext: context,\n\t\t\t\tname: \"sap.fe.cap.travel.ext.fragment.Trees4Tickets\"\n\t\t\t})) as Dialog;\n\t\t\t//Dialog Save button\n\t\t\tapproveDialog.getBeginButton().attachPress(function () {\n\t\t\t\tapproveDialog.close().destroy();\n\t\t\t\tresolve(null);\n\t\t\t});\n\t\t\t//Dialog Cancel button\n\t\t\tapproveDialog.getEndButton().attachPress(function () {\n\t\t\t\tapproveDialog.close().destroy();\n\t\t\t\treject(null);\n\t\t\t});\n\t\t\t//consider dialog closing with ESC\n\t\t\tapproveDialog.attachAfterClose(function () {\n\t\t\t\tapproveDialog.destroy();\n\t\t\t\treject(null);\n\t\t\t});\n\t\t\tapproveDialog.open();\n\t\t} catch (error) {\n\t\t\treject(null);\n\t\t}\n\t}\n\tstatic overrides = {\n\n\t\t/**\n\t\t * Called when a controller is instantiated and its View controls (if available) are already created.\n\t\t * Can be used to modify the View before it is displayed, to bind event handlers and do other one-time initialization.\n\t\t * @memberOf sap.fe.cap.travel.ext.controller.ObjectPageExtension\n\t\t */\n\t\tonInit(this: ObjectPageExtension) {\n\t\t\t// you can access the Fiori elements extensionAPI via this.base.getExtensionAPI\n\t\t\t//const model = this.base.getExtensionAPI().getModel();\n\t\t},\n\t\teditFlow: {\n\t\t\tonBeforeSave(this: ObjectPageExtension) {\n\t\t\t\tconst context = this.base\n\t\t\t\t\t.getExtensionAPI()\n\t\t\t\t\t.getBindingContext() as Context;\n\t\t\t\tif (!context.getProperty(\"GoGreen\")) {\n\t\t\t\t\t//void intentionally discards returned floating promise\n\t\t\t\t\treturn new Promise<null>((resolve, reject) => { void this.openDialog(resolve, reject, context); });\n\t\t\t\t}\n\t\t\t\treturn undefined;\n\t\t\t}\n\t\t}\n\t};\n}"],"mappings":";;;EAKA;AACA;AACA;AACA;EAHA,MAIqBA,mBAAmB,GAASC,mBAAmB,CAAAC,MAAA;IA6B5DC,SAAS,EAAG;MAElB;AACF;AACA;AACA;AACA;MACEC,MAAMA,CAAA,EAA4B;QACjC;QACA;MAAA,CACA;MACDC,QAAQ,EAAE;QACTC,YAAYA,CAAA,EAA4B;UACvC,MAAMC,OAAO,GAAG,IAAI,CAACC,IAAI,CACvBC,eAAe,CAAC,CAAC,CACjBC,iBAAiB,CAAC,CAAY;UAChC,IAAI,CAACH,OAAO,CAACI,WAAW,CAAC,SAAS,CAAC,EAAE;YACpC;YACA,OAAO,IAAIC,OAAO,CAAO,CAACC,OAAO,EAAEC,MAAM,KAAK;cAAE,KAAK,IAAI,CAACC,UAAU,CAACF,OAAO,EAAEC,MAAM,EAAEP,OAAO,CAAC;YAAE,CAAC,CAAC;UACnG;UACA,OAAOS,SAAS;QACjB;MACD;IACD,CAAC;IAnDKD,UAAU,iBAAAE,YAACJ,OAAkD,EAAEC,MAA8B,EAAEP,OAAgB,EAAE;MACtH;MACA,IAAI;QACH,IAAIW,aAAa,GAAI,MAAM,IAAI,CAACV,IAAI,CAACC,eAAe,CAAC,CAAC,CAACU,YAAY,CAAC;UACnEC,EAAE,EAAE,YAAY;UAChBC,qBAAqB,EAAEd,OAAO;UAC9Be,IAAI,EAAE;QACP,CAAC,CAAY;QACb;QACAJ,aAAa,CAACK,cAAc,CAAC,CAAC,CAACC,WAAW,CAAC,YAAY;UACtDN,aAAa,CAACO,KAAK,CAAC,CAAC,CAACC,OAAO,CAAC,CAAC;UAC/Bb,OAAO,CAAC,IAAI,CAAC;QACd,CAAC,CAAC;QACF;QACAK,aAAa,CAACS,YAAY,CAAC,CAAC,CAACH,WAAW,CAAC,YAAY;UACpDN,aAAa,CAACO,KAAK,CAAC,CAAC,CAACC,OAAO,CAAC,CAAC;UAC/BZ,MAAM,CAAC,IAAI,CAAC;QACb,CAAC,CAAC;QACF;QACAI,aAAa,CAACU,gBAAgB,CAAC,YAAY;UAC1CV,aAAa,CAACQ,OAAO,CAAC,CAAC;UACvBZ,MAAM,CAAC,IAAI,CAAC;QACb,CAAC,CAAC;QACFI,aAAa,CAACW,IAAI,CAAC,CAAC;MACrB,CAAC,CAAC,OAAOC,KAAK,EAAE;QACfhB,MAAM,CAAC,IAAI,CAAC;MACb;IACD;EAAC;EAAA,OA5BmBd,mBAAmB;AAAA","ignoreList":[]}