{"version":3,"file":"ObjectPageExtension.controller.js","names":["ObjectPageExtension","ControllerExtension","extend","overrides","onInit","editFlow","onBeforeSave","context","this","base","getExtensionAPI","getBindingContext","getProperty","Promise","resolve","reject","openDialog","undefined","async","_openDialog","approveDialog","loadFragment","id","initialBindingContext","name","getBeginButton","attachPress","close","destroy","getEndButton","attachAfterClose","open","error"],"sources":["ObjectPageExtension.controller.ts"],"sourcesContent":["import ControllerExtension from \"sap/ui/core/mvc/ControllerExtension\";\nimport ExtensionAPI from \"sap/fe/templates/ObjectPage/ExtensionAPI\";\nimport Context from \"sap/ui/model/odata/v4/Context\";\nimport Dialog from \"sap/m/Dialog\";\n\n/**\n * @namespace sap.fe.cap.travel.ext.controller\n * @controller\n */\nexport default class ObjectPageExtension extends ControllerExtension<ExtensionAPI> {\n\tasync openDialog(resolve: (value: PromiseLike<null> | null) => void, reject: (reason?: any) => void, context: Context) {\n\t\t//try catch ensures errors in floating promises are handled properly\n\t\ttry {\n\t\t\tlet approveDialog = (await this.base.getExtensionAPI().loadFragment({\n\t\t\t\tid: \"myFragment\",\n\t\t\t\tinitialBindingContext: context,\n\t\t\t\tname: \"sap.fe.cap.travel.ext.fragment.Trees4Tickets\"\n\t\t\t})) as Dialog;\n\t\t\t//Dialog Save button\n\t\t\tapproveDialog.getBeginButton().attachPress(function () {\n\t\t\t\tapproveDialog.close().destroy();\n\t\t\t\tresolve(null);\n\t\t\t});\n\t\t\t//Dialog Cancel button\n\t\t\tapproveDialog.getEndButton().attachPress(function () {\n\t\t\t\tapproveDialog.close().destroy();\n\t\t\t\treject(null);\n\t\t\t});\n\t\t\t//consider dialog closing with ESC\n\t\t\tapproveDialog.attachAfterClose(function () {\n\t\t\t\tapproveDialog.destroy();\n\t\t\t\treject(null);\n\t\t\t});\n\t\t\tapproveDialog.open();\n\t\t} catch (error) {\n\t\t\treject(null);\n\t\t}\n\t}\n\tstatic overrides = {\n\n\t\t/**\n\t\t * Called when a controller is instantiated and its View controls (if available) are already created.\n\t\t * Can be used to modify the View before it is displayed, to bind event handlers and do other one-time initialization.\n\t\t * @memberOf sap.fe.cap.travel.ext.controller.ObjectPageExtension\n\t\t */\n\t\tonInit(this: ObjectPageExtension) {\n\t\t\t// you can access the Fiori elements extensionAPI via this.base.getExtensionAPI\n\t\t\t//const model = this.base.getExtensionAPI().getModel();\n\t\t},\n\t\teditFlow: {\n\t\t\tonBeforeSave(this: ObjectPageExtension) {\n\t\t\t\tconst context = this.base\n\t\t\t\t\t.getExtensionAPI()\n\t\t\t\t\t.getBindingContext() as Context;\n\t\t\t\tif (!context.getProperty(\"GoGreen\")) {\n\t\t\t\t\t//void intentionally discards returned floating promise\n\t\t\t\t\treturn new Promise<null>((resolve, reject) => { void this.openDialog(resolve, reject, context); });\n\t\t\t\t}\n\t\t\t\treturn undefined;\n\t\t\t}\n\t\t}\n\t};\n}"],"mappings":"+EAKA,MAIqBA,EAA4BC,EAAmBC,OAAA,wDA6B5DC,UAAY,CAOlBC,SAEC,EAEDC,SAAU,CACTC,eACC,MAAMC,EAAUC,KAAKC,KACnBC,kBACAC,oBACF,IAAKJ,EAAQK,YAAY,WAAY,CAEpC,OAAO,IAAIC,QAAc,CAACC,EAASC,UAAkBP,KAAKQ,WAAWF,EAASC,EAAQR,EAAQ,EAC/F,CACA,OAAOU,SACR,IAjDID,WAAUE,eAAAC,EAACL,EAAoDC,EAAgCR,GAEpG,IACC,IAAIa,QAAuBZ,KAAKC,KAAKC,kBAAkBW,aAAa,CACnEC,GAAI,aACJC,sBAAuBhB,EACvBiB,KAAM,iDAGPJ,EAAcK,iBAAiBC,YAAY,WAC1CN,EAAcO,QAAQC,UACtBd,EAAQ,KACT,GAEAM,EAAcS,eAAeH,YAAY,WACxCN,EAAcO,QAAQC,UACtBb,EAAO,KACR,GAEAK,EAAcU,iBAAiB,WAC9BV,EAAcQ,UACdb,EAAO,KACR,GACAK,EAAcW,MACf,CAAE,MAAOC,GACRjB,EAAO,KACR,CACD,IAAC,OA5BmBf,CAAmB","ignoreList":[]}